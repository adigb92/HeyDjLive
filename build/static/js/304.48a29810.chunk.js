"use strict";(self.webpackChunkhey_dj=self.webpackChunkhey_dj||[]).push([[304],{3304:(e,a,n)=>{n.r(a),n.d(a,{default:()=>x});n(2791);var s=n(5705),t=n(8007),i=n(7689),l=n(7022),r=n(9743),c=n(2677),o=n(9140),d=n(2469),m=n(3855),u=n(3360),v=n(2954),h=n(9569),N=n(5178),b=n(184);const x=e=>{let{currentUser:a}=e;const n=(0,i.s0)(),{loading:x,error:j,handleSubmit:p,initialValues:Z}=(0,v.c)({initialValues:{eventName:"",eventLocation:"",eventDate:"",djName:a.name||""},endpoint:"/events",onSuccess:()=>{n("/dj-events-list")},onError:e=>a.isAdmin?e:"You must be an admin to create an event."}),y=t.Ry().shape({...h.rA.fields,djName:h.Nq});return(0,b.jsx)(l.Z,{className:"mt-5",children:(0,b.jsx)(r.Z,{className:"justify-content-center",children:(0,b.jsx)(c.Z,{xs:12,md:8,lg:6,children:(0,b.jsx)(o.Z,{className:"shadow-sm",children:(0,b.jsxs)(o.Z.Body,{className:"p-4",children:[(0,b.jsx)(o.Z.Title,{as:"h2",className:"text-center mb-4",children:"Create Event"}),j&&(0,b.jsxs)(d.Z,{variant:"danger",className:"mb-4",children:[(0,b.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),j]}),(0,b.jsx)(s.J9,{initialValues:Z,validationSchema:y,onSubmit:p,children:e=>{let{isSubmitting:a,errors:n,touched:t}=e;return(0,b.jsxs)(s.l0,{children:[(0,b.jsxs)(m.Z.Group,{className:"mb-4",children:[(0,b.jsx)(m.Z.Label,{className:"fw-bold",children:"Event Name"}),(0,b.jsx)(s.gN,{as:m.Z.Control,type:"text",name:"eventName",placeholder:"Enter event name",isInvalid:n.eventName&&t.eventName,className:"py-2"}),n.eventName&&t.eventName&&(0,b.jsxs)(m.Z.Control.Feedback,{type:"invalid",children:[(0,b.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),n.eventName]})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-4",children:[(0,b.jsx)(m.Z.Label,{className:"fw-bold",children:"DJ Name"}),(0,b.jsx)(s.gN,{as:m.Z.Control,type:"text",name:"djName",placeholder:"Enter DJ name",isInvalid:n.djName&&t.djName,className:"py-2"}),n.djName&&t.djName&&(0,b.jsxs)(m.Z.Control.Feedback,{type:"invalid",children:[(0,b.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),n.djName]})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-4",children:[(0,b.jsx)(m.Z.Label,{className:"fw-bold",children:"Event Location"}),(0,b.jsx)(s.gN,{as:m.Z.Control,type:"text",name:"eventLocation",placeholder:"Enter event location",isInvalid:n.eventLocation&&t.eventLocation,className:"py-2"}),n.eventLocation&&t.eventLocation&&(0,b.jsxs)(m.Z.Control.Feedback,{type:"invalid",children:[(0,b.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),n.eventLocation]})]}),(0,b.jsxs)(m.Z.Group,{className:"mb-4",children:[(0,b.jsx)(m.Z.Label,{className:"fw-bold",children:"Event Date"}),(0,b.jsx)(s.gN,{as:m.Z.Control,type:"date",name:"eventDate",isInvalid:n.eventDate&&t.eventDate,className:"py-2"}),n.eventDate&&t.eventDate&&(0,b.jsxs)(m.Z.Control.Feedback,{type:"invalid",children:[(0,b.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),n.eventDate]})]}),(0,b.jsx)("div",{className:"d-grid",children:(0,b.jsx)(u.Z,{variant:"primary",type:"submit",disabled:a||x,size:"lg",className:"py-2",children:a||x?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(N.Z,{size:20,variant:"bootstrap"}),(0,b.jsx)("span",{className:"ms-2",children:"Creating Event..."})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("i",{className:"bi bi-plus-circle-fill me-2"}),"Create Event"]})})})]})}})]})})})})})}},2954:(e,a,n)=>{n.d(a,{c:()=>l});var s=n(2791),t=n(5055),i=n(9942);const l=e=>{let{initialValues:a,endpoint:n,onSuccess:l,onError:r}=e;const[c,o]=(0,s.useState)(!1),[d,m]=(0,s.useState)(null),u=(0,s.useCallback)((async(e,a)=>{let{setSubmitting:s,resetForm:c}=a;o(!0),m(null);try{const a=await(0,i.v_)(n,e);(0,t.D)(a.message),l&&l(a),c()}catch(d){const a=(0,t.z)(d);m(a),r&&r(d)}finally{o(!1),s(!1)}}),[n,l,r]);return{loading:c,error:d,handleSubmit:u,initialValues:a}}},9569:(e,a,n)=>{n.d(a,{Io:()=>l,Nq:()=>r,aI:()=>t,rA:()=>c,zR:()=>i});var s=n(8007);const t=s.Z_().matches(/^[0-9]{10}$/,"Phone number must be 10 digits").required("Phone number is required"),i=s.Z_().oneOf(["male","female","other"],"Please select a valid gender").required("Gender is required"),l=s.Z_().email("Invalid email").required("Email is required"),r=s.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Name is required"),c=s.Ry().shape({eventName:s.Z_().min(2,"Too Short!").max(100,"Too Long!").required("Event name is required"),eventLocation:s.Z_().min(2,"Too Short!").max(200,"Too Long!").required("Event location is required"),eventDate:s.hT().required("Event date is required").test("is-not-past","Event date cannot be in the past",(function(e){if(!e)return!1;const a=new Date;a.setHours(0,0,0,0);const n=new Date(e);return n.setHours(0,0,0,0),n>=a}))});s.Ry().shape({genre:s.Z_().required("Genre is required"),youtubeLink:s.Z_().url("Must be a valid YouTube URL").required("YouTube link is required")})}}]);
//# sourceMappingURL=304.48a29810.chunk.js.map