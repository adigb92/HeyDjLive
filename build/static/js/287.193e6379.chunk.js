"use strict";(self.webpackChunkhey_dj=self.webpackChunkhey_dj||[]).push([[287],{6287:(e,a,s)=>{s.r(a),s.d(a,{default:()=>Z});var n=s(2791),t=s(7689),i=s(5705),l=s(8007),r=s(7022),c=s(9743),o=s(2677),d=s(2469),m=s(9140),u=s(3855),v=s(3360),x=s(2954),j=s(9569),h=s(5178),N=s(9942),b=s(5055),p=s(184);const Z=()=>{const{id:e}=(0,t.UO)(),[a,s]=(0,n.useState)(null),[Z,y]=(0,n.useState)(!0),f=(0,t.s0)();(0,n.useEffect)((()=>{(async()=>{try{const a=await(0,N.U2)(`/events/${e}`);s(a)}catch(q){console.error("Error fetching event:",q)}finally{y(!1)}})()}),[e]);const{loading:g,error:q,initialValues:E}=(0,x.c)({initialValues:a||{djName:"",eventName:"",eventLocation:"",eventDate:""},endpoint:`/events/${e}`,onSuccess:()=>{f("/dj-events-list")}}),L=l.Ry().shape({...j.rA.fields,djName:j.Nq});return Z?(0,p.jsx)(r.Z,{className:"mt-5",children:(0,p.jsx)(c.Z,{className:"justify-content-center",children:(0,p.jsx)(o.Z,{xs:12,md:8,lg:6,children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(h.Z,{size:40,variant:"bootstrap"}),(0,p.jsx)("p",{className:"mt-3",children:"Loading event details..."})]})})})}):a?(0,p.jsx)(r.Z,{className:"mt-5",children:(0,p.jsx)(c.Z,{className:"justify-content-center",children:(0,p.jsx)(o.Z,{xs:12,md:8,lg:6,children:(0,p.jsx)(m.Z,{className:"shadow-sm",children:(0,p.jsxs)(m.Z.Body,{className:"p-4",children:[(0,p.jsx)(m.Z.Title,{as:"h2",className:"text-center mb-4",children:"Edit Event"}),q&&(0,p.jsxs)(d.Z,{variant:"danger",className:"mb-4",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),q]}),(0,p.jsx)(i.J9,{initialValues:E,validationSchema:L,onSubmit:async(a,s)=>{try{await(0,N.gz)(`/events/${e}`,a),(0,b.D)("Event updated successfully!"),f("/dj-events-list")}catch(q){(0,b.z)(q)}finally{s.setSubmitting(!1)}},children:e=>{let{isSubmitting:a,errors:s,touched:n}=e;return(0,p.jsxs)(i.l0,{children:[(0,p.jsxs)(u.Z.Group,{className:"mb-4",children:[(0,p.jsx)(u.Z.Label,{className:"fw-bold",children:"DJ Name"}),(0,p.jsx)(i.gN,{as:u.Z.Control,type:"text",name:"djName",placeholder:"Enter DJ name",isInvalid:s.djName&&n.djName,className:"py-2"}),s.djName&&n.djName&&(0,p.jsxs)(u.Z.Control.Feedback,{type:"invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),s.djName]})]}),(0,p.jsxs)(u.Z.Group,{className:"mb-4",children:[(0,p.jsx)(u.Z.Label,{className:"fw-bold",children:"Event Name"}),(0,p.jsx)(i.gN,{as:u.Z.Control,type:"text",name:"eventName",placeholder:"Enter event name",isInvalid:s.eventName&&n.eventName,className:"py-2"}),s.eventName&&n.eventName&&(0,p.jsxs)(u.Z.Control.Feedback,{type:"invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),s.eventName]})]}),(0,p.jsxs)(u.Z.Group,{className:"mb-4",children:[(0,p.jsx)(u.Z.Label,{className:"fw-bold",children:"Event Location"}),(0,p.jsx)(i.gN,{as:u.Z.Control,type:"text",name:"eventLocation",placeholder:"Enter event location",isInvalid:s.eventLocation&&n.eventLocation,className:"py-2"}),s.eventLocation&&n.eventLocation&&(0,p.jsxs)(u.Z.Control.Feedback,{type:"invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),s.eventLocation]})]}),(0,p.jsxs)(u.Z.Group,{className:"mb-4",children:[(0,p.jsx)(u.Z.Label,{className:"fw-bold",children:"Event Date"}),(0,p.jsx)(i.gN,{as:u.Z.Control,type:"date",name:"eventDate",isInvalid:s.eventDate&&n.eventDate,className:"py-2"}),s.eventDate&&n.eventDate&&(0,p.jsxs)(u.Z.Control.Feedback,{type:"invalid",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-circle-fill me-2"}),s.eventDate]})]}),(0,p.jsxs)("div",{className:"d-flex gap-2",children:[(0,p.jsx)(v.Z,{variant:"primary",type:"submit",disabled:a||g,size:"lg",className:"flex-grow-1 py-2",children:a||g?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(h.Z,{size:20,variant:"bootstrap"}),(0,p.jsx)("span",{className:"ms-2",children:"Updating Event..."})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("i",{className:"bi bi-save-fill me-2"}),"Update Event"]})}),(0,p.jsxs)(v.Z,{variant:"secondary",onClick:()=>f("/dj-events-list"),size:"lg",className:"py-2",children:[(0,p.jsx)("i",{className:"bi bi-x-circle-fill me-2"}),"Cancel"]})]})]})}})]})})})})}):(0,p.jsx)(r.Z,{className:"mt-5",children:(0,p.jsx)(c.Z,{className:"justify-content-center",children:(0,p.jsx)(o.Z,{xs:12,md:8,lg:6,children:(0,p.jsxs)(d.Z,{variant:"warning",children:[(0,p.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Event not found"]})})})})}},2954:(e,a,s)=>{s.d(a,{c:()=>l});var n=s(2791),t=s(5055),i=s(9942);const l=e=>{let{initialValues:a,endpoint:s,onSuccess:l,onError:r}=e;const[c,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)(null),u=(0,n.useCallback)((async(e,a)=>{let{setSubmitting:n,resetForm:c}=a;o(!0),m(null);try{const a=await(0,i.v_)(s,e);(0,t.D)(a.message),l&&l(a),c()}catch(d){const a=(0,t.z)(d);m(a),r&&r(d)}finally{o(!1),n(!1)}}),[s,l,r]);return{loading:c,error:d,handleSubmit:u,initialValues:a}}},9569:(e,a,s)=>{s.d(a,{Io:()=>l,Nq:()=>r,aI:()=>t,rA:()=>c,zR:()=>i});var n=s(8007);const t=n.Z_().matches(/^[0-9]{10}$/,"Phone number must be 10 digits").required("Phone number is required"),i=n.Z_().oneOf(["male","female","other"],"Please select a valid gender").required("Gender is required"),l=n.Z_().email("Invalid email").required("Email is required"),r=n.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Name is required"),c=n.Ry().shape({eventName:n.Z_().min(2,"Too Short!").max(100,"Too Long!").required("Event name is required"),eventLocation:n.Z_().min(2,"Too Short!").max(200,"Too Long!").required("Event location is required"),eventDate:n.hT().required("Event date is required").test("is-not-past","Event date cannot be in the past",(function(e){if(!e)return!1;const a=new Date;a.setHours(0,0,0,0);const s=new Date(e);return s.setHours(0,0,0,0),s>=a}))});n.Ry().shape({genre:n.Z_().required("Genre is required"),youtubeLink:n.Z_().url("Must be a valid YouTube URL").required("YouTube link is required")})}}]);
//# sourceMappingURL=287.193e6379.chunk.js.map