"use strict";(self.webpackChunkhey_dj=self.webpackChunkhey_dj||[]).push([[636],{2636:(e,s,a)=>{a.r(s),a.d(s,{default:()=>j});var t=a(2791),n=a(1292),i=a(7022),l=a(2469),r=a(9140),c=a(9743),d=a(2677),o=a(3855),h=a(3360),m=a(9942),u=a(5055),v=a(5178),x=a(184);const j=()=>{var e;const[s,a]=(0,t.useState)(""),[j,p]=(0,t.useState)([]),[f,g]=(0,t.useState)(""),[y,Z]=(0,t.useState)(null),[N,b]=(0,t.useState)(!0),[w,C]=(0,t.useState)(!1),R=(0,t.useContext)(n.ZP);(0,t.useEffect)((()=>{(async()=>{var e;if(null!==R&&void 0!==R&&null!==(e=R.user)&&void 0!==e&&e.isAdmin)try{b(!0);const e=await(0,m.U2)(`/events/user/${R.user._id}`);p(e),Z(null)}catch(y){Z((0,u.z)(y,"Failed to load events. Please try again."))}finally{b(!1)}})()}),[R]);return null!==R&&void 0!==R&&null!==(e=R.user)&&void 0!==e&&e.isAdmin?(0,x.jsx)(i.Z,{className:"mt-4",children:(0,x.jsxs)(r.Z,{className:"shadow",children:[(0,x.jsx)(r.Z.Header,{className:"bg-primary text-white",children:(0,x.jsx)("h2",{className:"mb-0",children:"Generate Event QR Code"})}),(0,x.jsx)(r.Z.Body,{children:N?(0,x.jsx)(v.Z,{size:40,variant:"bootstrap"}):y?(0,x.jsx)(l.Z,{variant:"danger",children:y}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(c.Z,{children:[(0,x.jsxs)(d.Z,{md:6,children:[(0,x.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,x.jsx)(o.Z.Label,{children:"Select Event"}),(0,x.jsxs)(o.Z.Select,{value:f,onChange:e=>g(e.target.value),children:[(0,x.jsx)("option",{value:"",children:"Choose an event..."}),j.map((e=>(0,x.jsxs)("option",{value:e._id,children:[e.eventName," - ",new Date(e.eventDate).toLocaleDateString()]},e._id)))]})]}),(0,x.jsx)(h.Z,{variant:"primary",onClick:async()=>{if(f)try{C(!0),Z(null);const e=await(0,m.U2)(`/events/${f}/qr-code`);a(e.qrCode)}catch(y){Z((0,u.z)(y,"Failed to generate QR code. Please try again."))}finally{C(!1)}else Z("Please select an event first.")},disabled:!f||w,className:"mb-3",children:w?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.Z,{size:20,variant:"bootstrap"}),(0,x.jsx)("span",{className:"ms-2",children:"Generating..."})]}):"Generate QR Code"})]}),(0,x.jsx)(d.Z,{md:6,children:s&&(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("img",{src:s,alt:"Event QR Code",className:"img-fluid mb-3",style:{maxWidth:"250px"}}),(0,x.jsxs)("div",{className:"mt-3",children:[(0,x.jsx)(h.Z,{variant:"success",onClick:()=>{if(s){const e=document.createElement("a");e.href=s;const a=j.find((e=>e._id===f));e.download=`dj-qr-code-${(null===a||void 0===a?void 0:a.eventName)||"event"}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}},className:"me-2",children:"Download QR Code"}),(0,x.jsx)(h.Z,{variant:"primary",onClick:()=>window.print(),children:"Print QR Code"})]})]})})]}),s&&(0,x.jsxs)(l.Z,{variant:"info",className:"mt-3",children:[(0,x.jsx)("h5",{children:"Instructions for Guests:"}),(0,x.jsx)("p",{className:"mb-0",children:"Ask your guests to scan this QR code using their phone's camera or a QR code scanner app. This will redirect them to the app's registration page and automatically assign them to this event."})]})]})})]})}):(0,x.jsx)(i.Z,{className:"mt-4",children:(0,x.jsx)(l.Z,{variant:"warning",children:"You need to be a DJ to view this page."})})}},9743:(e,s,a)=>{a.d(s,{Z:()=>d});var t=a(1694),n=a.n(t),i=a(2791),l=a(162),r=a(184);const c=i.forwardRef(((e,s)=>{let{bsPrefix:a,className:t,as:i="div",...c}=e;const d=(0,l.vE)(a,"row"),o=(0,l.pi)(),h=(0,l.zG)(),m=`${d}-cols`,u=[];return o.forEach((e=>{const s=c[e];let a;delete c[e],null!=s&&"object"===typeof s?({cols:a}=s):a=s;const t=e!==h?`-${e}`:"";null!=a&&u.push(`${m}${t}-${a}`)})),(0,r.jsx)(i,{ref:s,...c,className:n()(t,d,...u)})}));c.displayName="Row";const d=c}}]);
//# sourceMappingURL=636.37fe4197.chunk.js.map