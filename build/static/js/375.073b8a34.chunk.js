"use strict";(self.webpackChunkhey_dj=self.webpackChunkhey_dj||[]).push([[375],{8375:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var i=a(2791),t=a(7689),l=a(1292),n=a(9942),r=a(5055),c=a(5178),o=a(7022),d=a(9743),m=a(2677),h=a(9140),u=a(2469),x=a(3855),j=a(3360),p=a(8007),g=a(184);const Z=p.Z_().email("Please enter a valid email address").required("Email is required"),f=()=>{const[e,s]=(0,i.useState)(""),[a,f]=(0,i.useState)(!1),[b,v]=(0,i.useState)(""),N=(0,t.s0)(),{user:y,loading:k,updateUser:w}=(0,i.useContext)(l.ZP);(0,i.useEffect)((()=>{y&&(y.authProvider&&!y.isProfileComplete?N("/profile-completion"):N("/genre-selection"))}),[y,N]);return k?(0,g.jsx)(o.Z,{className:"mt-5",children:(0,g.jsx)(d.Z,{className:"justify-content-center",children:(0,g.jsxs)(m.Z,{xs:12,className:"text-center",children:[(0,g.jsx)(c.Z,{size:40,variant:"bootstrap"}),(0,g.jsx)("p",{className:"mt-3",children:"Checking authentication..."})]})})}):(0,g.jsx)(o.Z,{className:"mt-5",children:(0,g.jsx)(d.Z,{className:"justify-content-center",children:(0,g.jsx)(m.Z,{xs:12,md:8,lg:6,children:(0,g.jsx)(h.Z,{className:"shadow-sm",children:(0,g.jsxs)(h.Z.Body,{className:"p-4",children:[(0,g.jsx)(h.Z.Title,{as:"h1",className:"text-center mb-4",children:"Login"}),b&&(0,g.jsx)(u.Z,{variant:"danger",children:b}),(0,g.jsxs)(x.Z,{onSubmit:async s=>{s.preventDefault(),f(!0),v("");try{await Z.validate(e);const s=await(0,n.v_)("/user/login",{email:e});s.token&&localStorage.setItem("token",s.token),w(s.user),(0,r.D)(s.message),s.user.authProvider&&!s.user.isProfileComplete?N("/profile-completion"):N("/genre-selection")}catch(b){b instanceof p.p8?v(b.message):v((0,r.z)(b))}finally{f(!1)}},children:[(0,g.jsxs)(x.Z.Group,{className:"mb-3",children:[(0,g.jsx)(x.Z.Label,{children:"Email"}),(0,g.jsx)(x.Z.Control,{type:"email",value:e,onChange:e=>s(e.target.value),placeholder:"Enter your email",isInvalid:!!b})]}),(0,g.jsx)("div",{className:"d-grid",children:(0,g.jsx)(j.Z,{variant:"success",type:"submit",disabled:a,className:"mb-3",children:a?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.Z,{size:20,variant:"bootstrap"}),(0,g.jsx)("span",{className:"ms-2",children:"Logging in..."})]}):"Login"})})]}),(0,g.jsxs)("div",{className:"text-center mb-3",children:[(0,g.jsx)("p",{className:"text-muted",children:"Or login with:"}),(0,g.jsxs)("div",{className:"d-flex justify-content-center gap-2",children:[(0,g.jsxs)(j.Z,{variant:"danger",onClick:()=>window.location.href="https://api.dj-hey.com/api/user/auth/google",children:[(0,g.jsx)("i",{className:"bi bi-google me-2"}),"Google"]}),(0,g.jsxs)(j.Z,{variant:"primary",onClick:()=>window.location.href="https://api.dj-hey.com/api/user/auth/facebook",children:[(0,g.jsx)("i",{className:"bi bi-facebook me-2"}),"Facebook"]})]})]})]})})})})})}}}]);
//# sourceMappingURL=375.073b8a34.chunk.js.map